{% extends "base.html" %}
{% load static %}
{% block title %}Amtsgerichte{% endblock %}
{% block content %}
<section class="section_bdl_select">
    <div class="section_bdl">
        <label for="selectedAmtsgericht">Wählen Sie ein Bundesland aus:</label>
        <div class="selectionfield">
            <select class="inputfield2" id="selectedAmtsgericht" name="Amtsgericht">
                <option>--- Bitte wählen ---</option>
                {% for amt in amtg %}
                    <option value="{{ amt }}">{{ amt }}</option>
                {% endfor %}
            </select>
            <button type="button" class="btn_amtg" id="searchButton2" data-url="{% url 'bdl_city' %}"
                 onclick="handleAmtgButtonClick('selectedAmtsgericht')">
                <span class="material-symbols-outlined">keyboard_double_arrow_right</span>
            </button>
        </div>
    </div>
</section>

<script>
    function handleAmtgButtonClick(selectId) {
        var selectedValue = document.getElementById(selectId).value;
        console.log('Selected Amtsgericht:', selectedValue);
        console.log('Redirecting to:', `${redirectUrl}?amtsgericht=${selectedValue}`);

        var redirectUrl = document.getElementById('searchButton2').getAttribute('data-url');
        
        // Check if a Bundesland is selected
        if (selectedValue !== '--- Bitte wählen ---') {
            window.location.href = redirectUrl + '?amtsgericht=' + selectedValue;
        }
    }
</script>

{% endblock %}
