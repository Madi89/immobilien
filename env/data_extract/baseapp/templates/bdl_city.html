{% extends "base.html" %}
{% load static %}
{% block title %}Staedte{% endblock %}
{% block content %}
<section class="section_bdl_select">
    <div class="section_bdl">
        <label for="selectedCities">Wählen Sie eine Stadt aus:</label>
        <div class="selectionfield">
            <select class="inputfield2" id="selectedBDLCity" name="Staedte">
                <option>--- Bitte wählen ---</option>
                {% for city, data in cities_data.items %}
                    <option value="{{ city }}">{{ data.cities }}</option>
                {% endfor %}
            </select>
            <button type="button" class="btn_amtg" id="searchButton3" data-url="{% url 'objekt_daten_nach_stadt' %}?amtsgericht={{ selected_amtsgericht }}"
                    onclick="handleCitiesButtonClick('selectedBDLCity')">
                <span class="material-symbols-outlined">keyboard_double_arrow_right</span>
            </button>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById("searchButton3").addEventListener("click", function () {
            handleCitiesButtonClick('selectedBDLCity');
        });

        function handleCitiesButtonClick(elementId) {
            var selectedValue = document.getElementById(elementId).value;
            if (selectedValue) {
                const url = `/objekt_daten_nach_stadt/?cities=${selectedValue}&amtsgericht={{ selected_amtsgericht }}`;
                window.location.href = url;
            } else {
                alert('Bitte wählen Sie eine Stadt aus.');
            }
        }
    });
</script>
{% endblock %}

